import{_ as V,g as h,r as p,a as k,b as I,e as i,w as R,d as t,t as y,x as T,G as B,ad as U,F as j,l as X,f as v,X as z,ae as F,af as G,c as x,s as $,ag as H,ah as q,a3 as J,p as K,h as Q,u as W,q as Y,i as A,j as Z,o as tt,ai as E,aj as et}from"./index.c1d8041c.js";import{_ as st}from"./AdminMenuList.5a9ed4f6.js";import{P as ot}from"./Pagination.2cb0858d.js";import{M as at,_ as nt}from"./MenuSelect.4c27544c.js";import{D as it}from"./vuedraggable.umd.33421fb2.js";const M=m=>(K("data-v-cac4965a"),m=m(),Q(),m),ct={class:"intro-x"},lt={class:"form-check"},dt=["id","onChange","checked"],rt={scope:"row"},ut={class:"w-20 h-20 image-fit zoom-in"},_t=["src"],ht={class:"font-medium whitespace-nowrap"},pt={class:"text-gray-600 text-xs whitespace-nowrap mt-0.5"},mt={class:"text-center"},gt=["innerHTML"],ft={class:"table-report__action"},vt={class:"dropdown inline-block","data-placement":"right-start"},bt={class:"dropdown-toggle -mr-3","aria-expanded":"false"},wt={class:"dropdown-menu w-40"},yt={class:"dropdown-menu__content box dark:bg-dark-1 p-2"},xt=["onClick"],kt=v("Edit "),It=["onClick"],Pt=v("Duplicate "),Ct=["onClick"],Lt=v("Delete "),St={id:"duplicate-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Dt={class:"modal-dialog"},$t={class:"modal-content"},Mt={class:"modal-body"},jt={class:"border-t border-theme-3 dark:border-dark-5 mt-5 text-white relative"},At={style:{"background-color":"rgba(100, 100, 100, 0.1)"},class:"absolute w-full h-full z-50 flex flex-col justify-center items-center"},Et=["onClick"],Tt=["src"],Nt={class:"ml-5"},Ot={id:"delete-confirmation-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Vt={class:"modal-dialog"},Rt={class:"modal-content"},Bt={class:"modal-body p-0"},Ut={class:"p-5 text-center"},Xt=M(()=>t("div",{class:"text-3xl mt-5"},"Are you sure?",-1)),zt=M(()=>t("div",{class:"text-gray-600 mt-2"},[v(" Do you really want to delete these records? "),t("br"),v("This process cannot be undone. ")],-1)),Ft=M(()=>t("button",{type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1)),Gt={__name:"DraggableList",props:{list:Array},emits:["update:list","reorder:list"],setup(m,{emit:b}){const d=h(null),u=h([]),c=h(!1);async function P(o){if(u.value=[],c.value=!0,!z.exports.isNull(o)){const l=await F(o,100);u.value=l.results}c.value=!1}async function r(o){b("reorder:list")}function s(o,l){G({product:l,is_available:o.target.checked})}function _(o){d.value=o,x("#duplicate-modal").modal("show")}function C(o){d.value=o,x("#delete-confirmation-modal").modal("show")}async function L(){x("#delete-confirmation-modal").modal("hide"),$.commit("setLoadingStatus",!0),await H(d.value),b("update:list"),$.commit("setLoadingStatus",!1)}async function S(o){try{c.value=!0;const l={product:d.value,category:o},e=await q(l);x("#duplicate-modal").modal("hide"),J.push("/admin/products/"+e.id)}catch(l){console.log("Error while duplicating product: ",l)}finally{c.value=!1}}return(o,l)=>{const e=p("MoreVerticalIcon"),n=p("Edit2Icon"),g=p("CopyIcon"),f=p("Trash2Icon"),N=p("LoadingIcon"),O=p("XCircleIcon");return k(),I(j,null,[i(T(it),{tag:"tbody",list:m.list,group:"list","item-key":"id",onChange:r,animation:300},{item:R(({element:a})=>{var D;return[t("tr",ct,[t("td",null,[t("div",lt,[t("input",{id:"product_available"+a.id,class:"form-check-switch",type:"checkbox",onChange:w=>s(w,a.id),checked:a.available},null,40,dt)])]),t("td",rt,[t("div",ut,[t("img",{alt:"image",class:"rounded-full",src:a.image},null,8,_t)])]),t("td",null,[t("p",ht,y(a.name),1),t("div",pt,y((D=a.category)==null?void 0:D.name),1)]),t("td",mt,y(a.position),1),t("td",{class:"",innerHTML:a.description},null,8,gt),t("td",ft,[t("div",vt,[t("button",bt,[i(e)]),t("div",wt,[t("div",yt,[t("button",{onClick:w=>o.$router.push("/admin/products/"+a.id),class:"flex w-full items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},[i(n,{class:"w-4 h-4 mr-2"}),kt],8,xt),t("button",{onClick:w=>_(a.id),class:"flex w-full items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},[i(g,{class:"w-4 h-4 mr-2"}),Pt],8,It),t("button",{onClick:w=>C(a.id),class:"flex w-full items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},[i(f,{class:"w-4 h-4 mr-2"}),Lt],8,Ct)])])])])])]}),_:1},8,["list"]),t("div",St,[t("div",Dt,[t("div",$t,[t("div",Mt,[i(at,{class:"mt-2","onUpdate:modelValue":P}),t("div",jt,[B(t("div",At,[i(N,{icon:"tail-spin",class:"mr-3 w-16 h-16",color:"#fff"})],512),[[U,c.value]]),(k(!0),I(j,null,X(u.value,a=>(k(),I("button",{class:"flex w-full items-center px-3 py-3 rounded-md hover:bg-gray-500",type:"button",onClick:D=>S(a.id)},[t("img",{class:"rounded-full",src:a.image_small,alt:"cat img"},null,8,Tt),t("span",Nt,y(a.name),1)],8,Et))),256))])])])])]),t("div",Ot,[t("div",Vt,[t("div",Rt,[t("div",Bt,[t("div",Ut,[i(O,{class:"w-16 h-16 text-theme-6 mx-auto mt-3"}),Xt,zt]),t("div",{class:"px-5 pb-8 text-center"},[Ft,t("button",{type:"button",class:"btn btn-danger w-24",onClick:L}," Delete ")])])])])])],64)}}},Ht=V(Gt,[["__scopeId","data-v-cac4965a"]]),qt={class:"intro-y flex flex-col sm:flex-row items-center gap-5 mt-10"},Jt=t("h2",{class:"text-lg font-medium"},"Products List",-1),Kt=["disabled"],Qt={class:"flex items-center justify-center"},Wt=t("span",{class:"ml-3"},"Add Product",-1),Yt={class:"pos intro-y grid grid-cols-12 gap-5 mt-5"},Zt={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},te={class:"table table-report -mt-2"},ee=t("thead",null,[t("tr",null,[t("th",null,"AVAILABLE"),t("th",{class:"whitespace-nowrap"},"IMAGES"),t("th",{class:"whitespace-nowrap"},"PRODUCT NAME"),t("th",{class:"text-center whitespace-nowrap"},"POSITION"),t("th",{class:"text-center whitespace-nowrap"},"DESCRIPTION"),t("th",{class:"text-center whitespace-nowrap w-5"},"ACTIONS")])],-1),ce={__name:"index",setup(m){const b=W(),d=Y(),u=A({}),c=Z(()=>$.getters.getSelectedMenuId),P=h(!1),r=h(!1),s=A({page:h(1),limit:h(10),total:h(0)});tt(async()=>{c.value&&await _()});async function _(){r.value=!0;try{const e=await E({menuId:c.value,page:s.page,limit:s.limit,search:""});e&&(Object.assign(u,e),s.total=e.total_objects)}catch(e){d.error("Error while fetching data list: "+e.message)}finally{r.value=!1}}async function C(e){s.page=e,await _()}async function L(e){s.limit=e,s.page=1,await _()}function S(){b.push("/admin/products/add")}async function o(){r.value=!0;try{await et({obj_type:"product",obj_list:u.results.map((n,g)=>({id:n.id,position:g+1+(s.page-1)*s.limit}))})&&(P.value=!1,_()),d.success()}catch{d.error()}finally{r.value=!1}}async function l(e){r.value=!0;try{if(e.length===0||e.length>2){const n=await E({menuId:c.value,page:s.page,limit:s.limit,search:e});n&&(Object.assign(u,n),s.total=n.total_objects)}}catch{d.error()}finally{r.value=!1}}return(e,n)=>{const g=p("PlusIcon");return k(),I("div",null,[i(st,{onUpdateId:_,"sub-item-title":"Products","sub-item-value":"product_count"}),t("div",qt,[Jt,t("button",{class:"btn btn-primary mr-3 flex align-middle whitespace-nowrap",onClick:S,disabled:!T(c)},[t("span",Qt,[i(g,{class:"w-4 h-4"})]),Wt],8,Kt),i(nt,{loading:r.value,onSearching:l},null,8,["loading"])]),t("div",Yt,[t("div",Zt,[t("table",te,[ee,i(Ht,{list:u.results,"onReorder:list":o,"onUpdate:list":_},null,8,["list"])])]),i(ot,{total:s.total,currentPage:s.page,perPage:s.limit,onPaginate:n[0]||(n[0]=f=>C(f)),onChangePerPage:n[1]||(n[1]=f=>L(f))},null,8,["total","currentPage","perPage"])])])}}};export{ce as default};
