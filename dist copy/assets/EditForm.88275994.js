import{V as v,u as h,g as n,i as y,o as z,az as x,a as q,b,d as s,J as k,e as m,I as F,aA as w}from"./index.c1d8041c.js";import{_ as E}from"./FormFields.cf52c4ae.js";import"./SimpleImageUpload.74eb2152.js";const P=s("div",{class:"intro-y flex items-center mt-8"},[s("h2",{class:"text-lg font-medium mr-auto"},"Product Edit Form")],-1),S={class:"grid grid-cols-12 gap-6 mt-5"},B={class:"intro-y col-span-12"},I={class:"intro-y box"},N={id:"form-validation",class:"p-5"},V=["onSubmit"],D={class:"flex pt-5 justify-end border-t border-gray-200 dark:border-dark-5"},A={__name:"EditForm",setup(M){var l,u;const f=v(),_=h(),d=useNotyf(),i=n({}),o=n(!1),c=(u=(l=f.params)==null?void 0:l.id)!=null?u:null,a=y({sizes:[{name:"",square_id:"",price:0,available:!1,default:!1}],modifiers:[],quickest_time:5}),p=n(null);z(async()=>{await x(c).then(e=>{a.sizes=e.sizes,a.start=e.start,a.end=e.end,a.quickest_time=e.quickest_time,a.square_id=e.square_id,a.name=e.name,a.description=e.description,a.tax_percent=e.tax_percent,a.category=e.category.id.toString(),a.modifiers=e.modifiers,p.value=e.image})});async function g(){o.value=!0,i.value={};try{const e=new FormData;a.image&&e.append("image",a.image),e.append("start",a.start),e.append("end",a.end),e.append("quickest_time",a.quickest_time),e.append("square_id",a.square_id),e.append("name",a.name),e.append("description",a.description),e.append("category",a.category),e.append("tax_percent",a.tax_percent);for(let t=0;t<a.sizes.length;t++)e.append("sizes["+t+"]name",a.sizes[t].name),e.append("sizes["+t+"]price",a.sizes[t].price),e.append("sizes["+t+"]available",a.sizes[t].available),e.append("sizes["+t+"]default",a.sizes[t].default),e.append("sizes["+t+"]square_id",a.sizes[t].square_id);for(let t=0;t<a.modifiers.length;t++)e.append("modifiers",a.modifiers[t]);const r=await w({id:c,data:e});d.success(),_.push("/admin/products")}catch(e){i.value=e.response.data,d.error()}finally{o.value=!1}}return(e,r)=>(q(),b("div",null,[P,s("div",S,[s("div",B,[s("div",I,[s("div",N,[s("form",{class:"validate-form",onSubmit:k(g,["prevent"]),enctype:"multipart/form-data"},[m(E,{"form-fields":a,"product-image-path":p.value,"external-errors":i.value,"onUpdate:formFields":r[0]||(r[0]=t=>a=t)},null,8,["form-fields","product-image-path","external-errors"]),s("div",D,[m(F,{"is-loading":o.value},null,8,["is-loading"])])],40,V)])])])])]))}};export{A as default};
