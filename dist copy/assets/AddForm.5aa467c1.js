import{u,q as _,i as d,g as c,a as g,b as v,d as t,J as h,e as l,I as b,aw as y}from"./index.c1d8041c.js";import{_ as x}from"./FormFields.cf52c4ae.js";import"./SimpleImageUpload.74eb2152.js";const z=t("div",{class:"intro-y flex items-center mt-8"},[t("h2",{class:"text-lg font-medium mr-auto"},"Product Add Form")],-1),k={class:"grid grid-cols-12 gap-6 mt-5"},F={class:"intro-y col-span-12"},q={class:"intro-y box"},w={id:"form-validation",class:"p-5"},j=["onSubmit"],B={class:"flex pt-5 justify-end border-t border-gray-200 dark:border-dark-5"},D={__name:"AddForm",setup(N){const p=u(),n=_(),i=d({}),r=c(!1),m=c(""),e=d({sizes:[{name:"",price:0,available:!1,default:!1}],modifiers:[],quickest_time:5,tax_percent:"100"});async function f(){r.value=!0,Object.assign(i,{});try{const s=new FormData;s.append("image",e.image),s.append("start",e.start),s.append("end",e.end),s.append("quickest_time",e.quickest_time),s.append("name",e.name),s.append("description",e.description),s.append("category",e.category),s.append("tax_percent",e.tax_percent);for(let a=0;a<e.sizes.length;a++)s.append("sizes["+a+"]name",e.sizes[a].name),s.append("sizes["+a+"]price",e.sizes[a].price),s.append("sizes["+a+"]available",e.sizes[a].available),s.append("sizes["+a+"]default",e.sizes[a].default);for(let a=0;a<e.modifiers.length;a++)s.append("modifiers",e.modifiers[a]);const o=await y(s);n.success(),p.push("/admin/products")}catch(s){Object.assign(i,s.response.data),n.error()}finally{r.value=!1}}return(s,o)=>(g(),v("div",null,[z,t("div",k,[t("div",F,[t("div",q,[t("div",w,[t("form",{class:"validate-form",onSubmit:h(f,["prevent"]),enctype:"multipart/form-data"},[l(x,{"form-fields":e,"product-image-path":m.value,"external-errors":i,"onUpdate:formFields":o[0]||(o[0]=a=>e=a)},null,8,["form-fields","product-image-path","external-errors"]),t("div",B,[l(b,{"is-loading":r.value},null,8,["is-loading"])])],40,j)])])])])]))}};export{D as default};
