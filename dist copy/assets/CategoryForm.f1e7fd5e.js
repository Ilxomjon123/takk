import{q as A,V as P,u as $,i as p,g as q,j as U,o as G,s as f,r as _,a as h,b,d as e,t as i,G as c,U as V,H as g,y as x,e as d,w as I,F as j,l as H,x as J,I as K,J as Q,f as W}from"./index.c1d8041c.js";import{j as T}from"./functions.ef796c81.js";const X={class:"col-span-12 lg:col-span-4 2xl:col-span-3 flex lg:block flex-col-reverse"},Y={class:"intro-y"},Z={class:"border-2 border-dashed shadow-sm border-gray-200 dark:border-dark-5 rounded-md p-5 items-center"},ee={class:"h-60 w-60 image-fit cursor-pointer zoom-in mx-auto"},te=["src"],se=["textContent"],oe={class:"mx-auto cursor-pointer relative mt-5"},ae=["onSubmit"],le={class:"flex flex-wrap -mx-3 mb-3"},ne={class:"w-full md:w-1/2 px-3 mb-3"},ie={class:"form-check"},re=e("label",{class:"form-check-label text-base",for:"category-available"},"Available",-1),ce={class:"w-full md:w-1/2 px-3 mb-3"},de={class:"form-check"},me=e("label",{class:"form-check-label text-base",for:"kitchen-order"},"Kitchen Order",-1),ue={class:"w-full px-3 mb-3"},pe=e("label",{for:"name",class:"form-label"},"Name",-1),fe=["textContent"],_e={for:"start-time",class:"w-full px-3 mb-2"},he=W("Available Time "),be={class:"w-full px-3 mb-3 md:w-1/2"},ge=["textContent"],xe={class:"w-full px-3 mb-3 md:w-1/2"},ve=["textContent"],ye={class:"w-full px-3 mb-3"},ke=e("label",{class:"form-label"},"Parent Category",-1),we=e("option",{value:"0"},"- - - - - - -",-1),Ce=["value"],Ue=["textContent"],Ve=["textContent"],Ie={class:"flex justify-end gap-3"},Se={__name:"CategoryForm",props:{form:{type:Object,default:{image:"/src/assets/images/product_category.jpg"}},isEdit:{type:Boolean,default:!1},dispatcher:{type:String,default:"postCategory"}},setup(S){var k,w;const m=S,v=A(),N=P(),O=$(),s=p({}),y=p({}),r=p({}),u=q(!1),B=(w=(k=N.params)==null?void 0:k.menuId)!=null?w:null,E=U(()=>f.getters.getCategories),F=U(()=>E.value.filter(a=>a.id!=(s==null?void 0:s.id)));G(async()=>{Object.assign(s,m.form),await f.dispatch("fetchCategories")});function L(a){document.getElementById(a).click()}function D(a,t){y[t]=a.target.files[0];const l=URL.createObjectURL(a.target.files[0]);s[t]=l}async function M(){var a;try{u.value=!0,Object.assign(r,{}),(s==null?void 0:s.parent)==0&&(s.parent=null);let t;const l={...s,...y,menu:B};typeof l.image=="string"&&delete l.image,m.isEdit?t={id:l.id,form:T(l)}:t=T(l);const C=await f.dispatch(m.dispatcher,t);v.success(),O.push("/dashboard/categories")}catch(t){Object.assign(r,(a=t.response)==null?void 0:a.data),v.error()}finally{u.value=!1}}function n(a){var t;return(t=r[a])==null?void 0:t[0]}return(a,t)=>{const l=_("InfoIcon"),C=_("Tippy"),R=_("TomSelect");return h(),b(j,null,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("img",{class:"rounded-md",alt:"Takk",src:s==null?void 0:s.image},null,8,te),e("input",{type:"file",hidden:"",id:"avatar-image",onChange:t[0]||(t[0]=o=>D(o,"image"))},null,32)]),e("div",{class:"text-theme-6",textContent:i(n("image"))},null,8,se),e("div",oe,[e("button",{type:"button",onClick:t[1]||(t[1]=o=>L("avatar-image")),class:"btn btn-primary w-full"}," Change Photo ")])])])]),e("form",{onSubmit:Q(M,["prevent"]),class:"col-span-12 lg:col-span-8 2xl:col-span-9"},[e("div",le,[e("div",ne,[e("div",ie,[c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.available=o),id:"category-available",class:"form-check-switch",type:"checkbox"},null,512),[[V,s.available]]),re])]),e("div",ce,[e("div",de,[c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.is_kitchen=o),id:"kitchen-order",class:"form-check-switch",type:"checkbox"},null,512),[[V,s.is_kitchen]]),me])]),e("div",ue,[pe,c(e("input",{id:"name",type:"text",class:x(["form-control",n("name")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Name","onUpdate:modelValue":t[4]||(t[4]=o=>s.name=o)},null,2),[[g,s.name]]),e("div",{class:"text-theme-6",textContent:i(n("name"))},null,8,fe)]),e("label",_e,[he,d(C,{content:"If left blank product is always available."},{default:I(()=>[d(l,{class:"block text-xs w-4"})]),_:1})]),e("div",be,[c(e("input",{id:"start-time",type:"time",class:x(["form-control",n("start")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Username","onUpdate:modelValue":t[5]||(t[5]=o=>s.start=o)},null,2),[[g,s.start]]),e("div",{class:"text-theme-6",textContent:i(n("start"))},null,8,ge)]),e("div",xe,[c(e("input",{id:"end-time",type:"time",class:x(["form-control",n("end")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Username","onUpdate:modelValue":t[6]||(t[6]=o=>s.end=o)},null,2),[[g,s.end]]),e("div",{class:"text-theme-6",textContent:i(n("end"))},null,8,ve)]),e("div",ye,[ke,d(R,{modelValue:s.parent,"onUpdate:modelValue":t[7]||(t[7]=o=>s.parent=o),options:{placeholder:"Select Category"},class:"w-full"},{default:I(()=>[we,(h(!0),b(j,null,H(J(F),(o,z)=>(h(),b("option",{key:z,value:o.id},i(o.name),9,Ce))),128))]),_:1},8,["modelValue"]),e("div",{class:"text-theme-6",textContent:i(n("parent"))},null,8,Ue)]),e("div",{class:"text-theme-6",textContent:i(r==null?void 0:r.detail)},null,8,Ve)]),e("div",Ie,[d(K,{"is-loading":u.value},null,8,["is-loading"])])],40,ae)],64)}}};export{Se as _};
