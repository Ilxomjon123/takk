import{g as p,o as S,s as h,r as D,a as d,b as f,d as e,e as u,w as M,F as C,l as I,t as g,I as V,J as O,G as b,U as W,H as w,A as N,V as U,q as j,W as q,X as E,Y as z,x as B,Z as G,n as R,$ as A,i as X,R as Y,z as P,f as T,a0 as H,c as F,a1 as J,a2 as Z,a3 as K,a4 as Q}from"./index.c1d8041c.js";import{a as L,C as ee,_ as te}from"./CafeInformation.0fd2faf8.js";import{_ as ae}from"./WeekDayTimeForm.3edc03db.js";import"./leaflet.ed97b7e6.js";const se={class:"intro-y box lg:mt-5"},oe=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe Operations")],-1),le=["onSubmit"],ie={class:"flex xl:flex-row flex-col mb-5"},ne={class:"flex-1 mt-6 xl:mt-0"},re={class:"grid grid-cols-12 gap-x-5"},de={class:"col-span-12 2xl:col-span-6"},me={class:"col-span-12 2xl:col-span-6"},ce={class:"mt-3"},ue=e("label",{for:"cafe-form-menu",class:"form-label"},"Menu",-1),fe=["value"],_e={class:"flex justify-end gap-3"},ye={__name:"CafeOperations",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}},isLoading:!1},emits:["update:formData"],setup(t,{emit:_}){const m=t,c=p([]);async function i(){_("update:formData",m.formData)}return S(async()=>{const s=await h.dispatch("fetchMenus");c.value=s.results}),(s,a)=>{const x=D("TomSelect");return d(),f("div",se,[oe,e("form",{class:"p-5",onSubmit:O(i,["prevent"])},[e("div",ie,[e("div",ne,[e("div",re,[e("div",de,[u(L,{modelValue:t.formData.tax_rate,"onUpdate:modelValue":a[0]||(a[0]=n=>t.formData.tax_rate=n),title:"Tax rate","id-value":"cafe-form-tax_rate",error:t.externalErrors.tax_rate&&t.externalErrors.tax_rate[0],"is-required":!0,typeValue:"number"},null,8,["modelValue","error"]),u(L,{modelValue:t.formData.order_limit,"onUpdate:modelValue":a[1]||(a[1]=n=>t.formData.order_limit=n),title:"Order limit","id-value":"cafe-form-order_limit",error:t.externalErrors.order_limit&&t.externalErrors.order_limit[0],"is-required":!0,typeValue:"number",class:"mt-3"},null,8,["modelValue","error"])]),e("div",me,[u(L,{modelValue:t.formData.order_time_limit,"onUpdate:modelValue":a[2]||(a[2]=n=>t.formData.order_time_limit=n),title:"Order Interval Time (interval between each order times)","id-value":"cafe-form-order_time_limit",error:t.externalErrors.order_time_limit&&t.externalErrors.order_time_limit[0],"is-required":!0,typeValue:"number",class:"mt-3 2xl:mt-0"},null,8,["modelValue","error"]),e("div",ce,[ue,u(x,{id:"cafe-form-menu",modelValue:t.formData.menu,"onUpdate:modelValue":a[3]||(a[3]=n=>t.formData.menu=n),options:{placeholder:"Search.."},class:"w-full"},{default:M(()=>[(d(!0),f(C,null,I(c.value,({name:n,id:l})=>(d(),f("option",{key:l,value:l},g(n),9,fe))),128))]),_:1},8,["modelValue","options"])])])])])]),e("div",_e,[u(V,{"is-loading":t.isLoading},null,8,["is-loading"])])],40,le)])}}},ve={class:"intro-y box lg:mt-5"},pe=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe Delivery")],-1),xe=["onSubmit"],ge={class:"flex xl:flex-row flex-col"},be={class:"flex-1 mt-6 xl:mt-0"},he={class:"flex mb-3"},we={class:"form-check w-auto"},$e=e("label",{class:"form-check-label",for:"delivery_available"},"Delivery available",-1),ke={class:"flex flex-col lg:flex-row gap-5 pt-5"},De={class:"input-form lg:basis-1/2"},Ce=e("label",{for:"delivery_max_distance",class:"form-label w-full flex flex-col sm:flex-row"},"Delivery max distance",-1),Ee={class:"input-group"},Ve=e("div",{id:"input-group-km",class:"input-group-text"},"km",-1),Ue={class:"text-theme-6 mt-2"},je={class:"input-form lg:basis-1/2"},Le=e("label",{for:"delivery_min_amount",class:"form-label w-full flex flex-col sm:flex-row"},"Delivery min amount",-1),Se={class:"input-group"},Ie=e("div",{id:"input-group-dollarsign",class:"input-group-text"}," $ ",-1),Oe={class:"text-theme-6 mt-2"},Te={class:"flex flex-col lg:flex-row gap-5 pt-5"},Fe={class:"input-form lg:basis-1/2"},Me=e("label",{for:"delivery_fee",class:"form-label w-full flex flex-col sm:flex-row"},"Fixed fee",-1),Ne={class:"input-group"},Re=e("div",{id:"input-group-dollarsign",class:"input-group-text"}," $ ",-1),We={class:"text-theme-6 mt-2"},qe={class:"input-form lg:basis-1/2"},ze=e("label",{for:"delivery_percent",class:"form-label w-full flex flex-col sm:flex-row"},"% of order fee",-1),Be={class:"text-theme-6 mt-2"},Ge={class:"flex flex-col lg:flex-row gap-5 py-5"},Ae={class:"input-form lg:basis-1/2"},Xe=e("label",{for:"delivery_km_amount",class:"form-label w-full flex flex-col sm:flex-row"},"Fee per kilometer",-1),Ye={class:"text-theme-6 mt-2"},Pe={class:"input-form lg:basis-1/2"},He=e("label",{for:"delivery_min_time",class:"form-label w-full flex flex-col sm:flex-row"},"Delivery time (in minutes)",-1),Je={class:"text-theme-6 mt-2"},Ze={class:"flex justify-end gap-3"},Ke={__name:"CafeDelivery",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}},isLoading:!1},emits:["update:formData"],setup(t,{emit:_}){const m=t;async function c(){_("update:formData",m.formData)}return(i,s)=>(d(),f("div",ve,[pe,e("form",{class:"p-5",onSubmit:O(c,["prevent"])},[e("div",ge,[e("div",be,[e("div",he,[e("div",we,[b(e("input",{id:"delivery_available",class:"form-check-switch",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>t.formData.delivery_available=a)},null,512),[[W,t.formData.delivery_available]]),$e])]),t.formData.delivery_available?(d(),f(C,{key:0},[e("div",ke,[e("div",De,[Ce,e("div",Ee,[Ve,b(e("input",{id:"delivery_max_distance","onUpdate:modelValue":s[1]||(s[1]=a=>t.formData.delivery_max_distance=a),type:"number",class:"form-control","aria-describedby":"input-group-km"},null,512),[[w,t.formData.delivery_max_distance]]),e("span",Ue,g(t.externalErrors.delivery_max_distance&&t.externalErrors.delivery_max_distance[0]),1)])]),e("div",je,[Le,e("div",Se,[Ie,b(e("input",{id:"delivery_min_amount","onUpdate:modelValue":s[2]||(s[2]=a=>t.formData.delivery_min_amount=a),type:"number",step:"0.001",class:"form-control","aria-describedby":"input-group-dollarsign"},null,512),[[w,t.formData.delivery_min_amount]]),e("span",Oe,g(t.externalErrors.delivery_min_amount&&t.externalErrors.delivery_min_amount[0]),1)])])]),e("div",Te,[e("div",Fe,[Me,e("div",Ne,[Re,b(e("input",{id:"delivery_fee","onUpdate:modelValue":s[3]||(s[3]=a=>t.formData.delivery_fee=a),type:"number",step:"0.001",class:"form-control","aria-describedby":"input-group-dollarsign"},null,512),[[w,t.formData.delivery_fee]]),e("span",We,g(t.externalErrors.delivery_fee&&t.externalErrors.delivery_fee[0]),1)])]),e("div",qe,[ze,b(e("input",{id:"delivery_percent","onUpdate:modelValue":s[4]||(s[4]=a=>t.formData.delivery_percent=a),type:"number",step:"0.001",class:"form-control",placeholder:"Type.."},null,512),[[w,t.formData.delivery_percent]]),e("span",Be,g(t.externalErrors.delivery_percent&&t.externalErrors.delivery_percent[0]),1)])]),e("div",Ge,[e("div",Ae,[Xe,b(e("input",{id:"delivery_km_amount","onUpdate:modelValue":s[5]||(s[5]=a=>t.formData.delivery_km_amount=a),type:"number",class:"form-control",placeholder:"Type.."},null,512),[[w,t.formData.delivery_km_amount]]),e("span",Ye,g(t.externalErrors.delivery_km_amount&&t.externalErrors.delivery_km_amount[0]),1)]),e("div",Pe,[He,b(e("input",{id:"delivery_min_time","onUpdate:modelValue":s[6]||(s[6]=a=>t.formData.delivery_min_time=a),type:"number",class:"form-control",placeholder:"Type.."},null,512),[[w,t.formData.delivery_min_time]]),e("span",Je,g(t.externalErrors.delivery_min_time&&t.externalErrors.delivery_min_time[0]),1)])])],64)):N("",!0),e("div",Ze,[u(V,{"is-loading":t.isLoading},null,8,["is-loading"])])])])],40,xe)]))}},Qe={class:"flex flex-col md:flex-row flex-wrap w-full"},et={class:"md:basis-1/2 lg:basis-1/4 2xl:basis-1/6 border-2 border-dashed shadow-sm border-gray-200 dark:border-dark-5 rounded-md p-5"},tt={class:"md:basis-1/2 lg:basis-1/4 2xl:basis-1/6 border-2 border-dashed shadow-sm border-gray-200 dark:border-dark-5 rounded-md p-5"},at={class:"h-24 lg:h-40 relative image-fit cursor-pointer zoom-in mx-auto"},st=["src"],ot={__name:"MultipleImageUpload",props:{objId:null},emits:["update:image-files"],setup(t,{emit:_}){const m=U(),c=j(),i=p(null),s=p([]),a=p([]);S(async()=>{m.params.id&&(h.commit("setLoadingStatus",!0),q(m.params.id).then(l=>{a.value=l||[],h.commit("setLoadingStatus",!1)}))});function x(l){a.value.length+l.target.files.length<=5?(l.target.files.forEach((r,y)=>{a.value.push({image:URL.createObjectURL(r),id:`img-${y}-${new Date().getTime()}`}),s.value.push(r)}),_("update:image-files",s.value)):c.warning("You can add max 5 images")}function n(l,r){a.value=E.exports.remove(a.value,(y,o)=>y.id!==l),s.value=E.exports.remove(s.value,(y,o)=>r!==o),_("update:image-files",s.value),String(l).startsWith("img")||z(l)}return(l,r)=>{const y=D("PlusIcon"),o=D("xIcon"),v=D("Tippy");return d(),f("div",Qe,[e("div",et,[e("button",{type:"button",class:"btn w-full h-24 lg:h-40 border-2 shadow-sm border-gray-200 dark:border-dark-5 rounded-md",onClick:r[0]||(r[0]=$=>i.value.click())},[u(y)]),e("input",{type:"file",ref_key:"inputFile",ref:i,multiple:"",class:"hidden",onChange:x},null,544)]),(d(!0),f(C,null,I(a.value,($,k)=>(d(),f("div",tt,[e("div",at,[e("img",{class:"rounded-md",alt:"Logo",src:$.image_small,"data-action":"zoom"},null,8,st),u(v,{tag:"div",content:"Remove this logo?",class:"w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",onClick:Mt=>n($.id,k)},{default:M(()=>[u(o,{class:"w-4 h-4"})]),_:2},1032,["onClick"])])]))),256))])}}},lt={class:"intro-y box lg:mt-5"},it=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe gallery")],-1),nt={class:"p-5"},rt={class:"flex xl:flex-row flex-col"},dt={class:"flex-1 mt-6 xl:mt-0"},mt={class:"flex justify-end gap-3"},ct={__name:"CafeGallery",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}}},emits:["update:formData"],setup(t,{emit:_}){const m=U();j();const c=p(!1);return(i,s)=>(d(),f("div",lt,[it,e("div",nt,[e("div",rt,[e("div",dt,[u(ot,{"onUpdate:imageFiles":s[0]||(s[0]=a=>t.formData.upload_photos=a),"obj-id":B(m).params.id,class:"my-5"},null,8,["obj-id"]),e("div",mt,[u(V,{"is-loading":c.value},null,8,["is-loading"])])])])])]))}},ut={class:"intro-y box lg:mt-5"},ft=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe working days")],-1),_t=["onSubmit"],yt={class:"flex xl:flex-row flex-col"},vt={class:"flex-1 mt-6 xl:mt-0"},pt={class:"input-form"},xt={class:"form-check w-auto"},gt=["checked"],bt=e("label",{class:"font-medium text-base ml-2 cursor-pointer",for:"status"},"Open/Closed",-1),ht={class:"text-theme-6 mt-2"},wt=e("div",{class:"flex flex-col sm:flex-row items-center my-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe hours")],-1),$t={class:"text-theme-6 mt-2"},kt={class:"flex justify-end gap-3"},Dt={__name:"CafeWorkingDays",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}}},emits:["update:formData"],setup(t,{emit:_}){const m=t,c=U(),i=j(),s=p(!1),a=p([{day:"monday",opening_time:null,closing_time:null,is_open:!1},{day:"tuesday",opening_time:null,closing_time:null,is_open:!1},{day:"wednesday",opening_time:null,closing_time:null,is_open:!1},{day:"thursday",opening_time:null,closing_time:null,is_open:!1},{day:"friday",opening_time:null,closing_time:null,is_open:!1},{day:"saturday",opening_time:null,closing_time:null,is_open:!1},{day:"sunday",opening_time:null,closing_time:null,is_open:!1}]);S(async()=>{(await G(c.params.id)).forEach((l,r)=>{a.value.forEach((y,o)=>{y.day===l.day&&(a.value[o]=l)})})});async function x(){try{s.value=!0;const n=await A({data:{week_time:a.value},id:c.params.id});i.success()}catch(n){n.response&&(i.error(),m.externalErrors.value=n.response.data)}finally{s.value=!1}}return(n,l)=>(d(),f("div",ut,[ft,e("form",{class:"p-5",onSubmit:O(x,["prevent"])},[e("div",yt,[e("div",vt,[e("div",pt,[e("div",xt,[e("input",{id:"status",class:"form-check-switch",type:"checkbox",checked:t.formData.status===1,onChange:l[0]||(l[0]=r=>t.formData.status=r.target.checked===!0?1:0)},null,40,gt),bt]),e("span",ht,g(t.externalErrors.status&&t.externalErrors.status[0]),1)]),t.formData.status===1?(d(),f(C,{key:0},[wt,(d(!0),f(C,null,I(a.value,(r,y)=>(d(),R(ae,{key:r.day,day:r,"onUpdate:opening_time":o=>r.opening_time=o,"onUpdate:closing_time":o=>r.closing_time=o,"onUpdate:is_open":o=>r.is_open=o,class:"mb-5 lg:mb-10"},null,8,["day","onUpdate:opening_time","onUpdate:closing_time","onUpdate:is_open"]))),128)),e("span",$t,g(t.externalErrors.week_time&&t.externalErrors.week_time[0]),1)],64)):N("",!0)])]),e("div",kt,[u(V,{"is-loading":s.value},null,8,["is-loading"])])],40,_t)]))}},Ct=e("div",{class:"intro-y flex items-center mt-8"},[e("h2",{class:"text-lg font-medium mr-auto"},"Cafe Edit Form")],-1),Et={class:"grid grid-cols-12 gap-6"},Vt={class:"col-span-12 lg:col-span-8 2xl:col-span-9"},Ut={id:"delete-confirmation-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},jt={class:"modal-dialog"},Lt={class:"modal-content"},St={class:"modal-body p-0"},It={class:"p-5 text-center"},Ot=e("div",{class:"text-3xl mt-5"},"Are you sure?",-1),Tt=e("div",{class:"text-gray-600 mt-2"},[T(" Do you really want to delete these records? "),e("br"),T("This process cannot be undone. ")],-1),Ft=e("button",{type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),zt={__name:"EditForm",setup(t){const _=U(),m=j(),c=p("CafeInformation"),i=X({location:{coordinates:[35.1234,-95.1234]},country:236,name:"",call_center:"",website:"",state:"",city:"",postal_code:"",address:"",second_address:"",description:"",week_time:[{day:"monday",opening_time:null,closing_time:null,is_open:!1},{day:"tuesday",opening_time:null,closing_time:null,is_open:!1},{day:"wednesday",opening_time:null,closing_time:null,is_open:!1},{day:"thursday",opening_time:null,closing_time:null,is_open:!1},{day:"friday",opening_time:null,closing_time:null,is_open:!1},{day:"saturday",opening_time:null,closing_time:null,is_open:!1},{day:"sunday",opening_time:null,closing_time:null,is_open:!1}],delivery_available:!1,delivery_max_distance:1,delivery_min_amount:50,delivery_fee:3,delivery_percent:10,delivery_km_amount:0,delivery_min_time:30,cafe_timezone:"America/New_York",status:0}),s=p({}),a={CafeInformation:te,CafeOperations:ye,CafeDelivery:Ke,CafeGallery:ct,CafeWorkingDays:Dt},x=p(!1);Y(()=>_.params.id,async o=>{if(console.log("newVal: ",o),o){h.commit("setLoadingStatus",!0);const v=await Q(o);Object.assign(i,v),(E.exports.isEmpty(i.country)||!Number(i.country))&&(i.country=236),h.commit("setLoadingStatus",!1)}},{deep:!0,immediate:!0});function n(o){c.value=o}async function l(o){x.value=!0,s.value={},delete o.logo;try{await H({data:o,id:_.params.id}),m.success()}catch(v){v.response&&(m.error(),s.value=v.response.data)}finally{x.value=!1}}function r(){F("#delete-confirmation-modal").modal("show")}async function y(){h.commit("setLoadingStatus",!0),F("#delete-confirmation-modal").modal("hide"),E.exports.isEmpty(i.photos)||i.photos.forEach(async({id:o})=>await J(o)),await Z(i.id),h.commit("setLoadingStatus",!1),m.success("Data successfully removed!"),K.back()}return(o,v)=>{const $=D("XCircleIcon");return d(),f("div",null,[e("div",null,[Ct,e("div",Et,[u(ee,{"onUpdate:selectedItem":v[0]||(v[0]=k=>n(k)),"form-type":"edit","form-data":i,"external-errors":s.value,"onRemove:formData":r},null,8,["form-data","external-errors"]),e("div",Vt,[(d(),R(P(a[c.value]),{"form-data":i,"is-loading":x.value,"external-errors":s.value,"onUpdate:formData":v[1]||(v[1]=k=>l(k))},null,40,["form-data","is-loading","external-errors"]))])])]),e("div",Ut,[e("div",jt,[e("div",Lt,[e("div",St,[e("div",It,[u($,{class:"w-16 h-16 text-theme-6 mx-auto mt-3"}),Ot,Tt]),e("div",{class:"px-5 pb-8 text-center"},[Ft,e("button",{type:"button",class:"btn btn-danger w-24",onClick:y}," Delete ")])])])])])])}}};export{zt as default};
