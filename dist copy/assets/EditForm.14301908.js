import{g as d,V as f,u as _,q as g,i as v,o as h,aZ as y,a as z,b as q,d as s,J as x,e as l,I as b,a_ as k}from"./index.c1d8041c.js";import{_ as F}from"./FormFields.9f412231.js";import"./SimpleImageUpload.74eb2152.js";const w=s("div",{class:"intro-y flex items-center mt-8"},[s("h2",{class:"text-lg font-medium mr-auto"},"Product Edit Form")],-1),E={class:"grid grid-cols-12 gap-6 mt-5"},P={class:"intro-y col-span-12"},S={class:"intro-y box"},B={id:"form-validation",class:"p-5"},N=["onSubmit"],V={class:"flex pt-5 justify-end border-t border-gray-200 dark:border-dark-5"},$={__name:"EditForm",setup(D){const i=d({}),o=d(!1),n=f(),m=_(),c=g(),a=v({sizes:[{name:"",square_id:"",price:0,available:!1,default:!1}],modifiers:[],quickest_time:5}),p=d(null);h(async()=>{await y(n.params.id).then(e=>{a.sizes=e.sizes,a.start=e.start,a.end=e.end,a.quickest_time=e.quickest_time,a.square_id=e.square_id,a.name=e.name,a.description=e.description,a.tax_percent=e.tax_percent,a.category=e.category.id.toString(),a.modifiers=e.modifiers,p.value=e.image})});async function u(){o.value=!0,i.value={};try{const e=new FormData;a.image&&e.append("image",a.image),e.append("start",a.start),e.append("end",a.end),e.append("quickest_time",a.quickest_time),e.append("square_id",a.square_id),e.append("name",a.name),e.append("description",a.description),e.append("category",a.category),e.append("tax_percent",a.tax_percent);for(let t=0;t<a.sizes.length;t++)e.append("sizes["+t+"]name",a.sizes[t].name),e.append("sizes["+t+"]price",a.sizes[t].price),e.append("sizes["+t+"]available",a.sizes[t].available),e.append("sizes["+t+"]default",a.sizes[t].default),e.append("sizes["+t+"]square_id",a.sizes[t].square_id);for(let t=0;t<a.modifiers.length;t++)e.append("modifiers",a.modifiers[t]);const r=await k({id:n.params.id,data:e});c.success(),m.push("/dashboard/products")}catch(e){i.value=e.response.data,c.error()}finally{o.value=!1}}return(e,r)=>(z(),q("div",null,[w,s("div",E,[s("div",P,[s("div",S,[s("div",B,[s("form",{class:"validate-form",onSubmit:x(u,["prevent"]),enctype:"multipart/form-data"},[l(F,{"form-fields":a,"product-image-path":p.value,"external-errors":i.value,"onUpdate:formFields":r[0]||(r[0]=t=>a=t)},null,8,["form-fields","product-image-path","external-errors"]),s("div",V,[l(b,{"is-loading":o.value},null,8,["is-loading"])])],40,N)])])])])]))}};export{$ as default};
