import{g,o as C,s as j,r as k,a as c,b as f,d as e,e as u,w as B,F as D,l as S,t as x,I,J as T,G as b,U as G,H as w,A as N,V as E,q as V,W as q,X as O,Y as R,x as z,aP as A,Z as P,n as W,$ as X,i as L,aQ as Y,z as H,f as F,aR as J,c as M,aS as Q,a3 as Z}from"./index.c1d8041c.js";import{a as U,C as K,_ as ee}from"./CafeInformation.c4a9cf54.js";import{_ as te}from"./WeekDayTimeForm.3edc03db.js";import"./leaflet.ed97b7e6.js";const ae={class:"intro-y box lg:mt-5"},se=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe Operations")],-1),oe=["onSubmit"],le={class:"flex xl:flex-row flex-col"},ie={class:"flex-1 mt-6 xl:mt-0"},ne={class:"grid grid-cols-12 gap-x-5 mb-5"},re={class:"col-span-12 2xl:col-span-6"},de={class:"col-span-12 2xl:col-span-6"},me={class:"mt-3"},ce=e("label",{for:"cafe-form-menu",class:"form-label"},"Menu",-1),ue=["value"],fe={class:"flex justify-end gap-3"},_e={__name:"CafeOperations",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}},isLoading:!1},emits:["update:formData"],setup(t,{emit:_}){const m=t,d=g([]);async function i(){_("update:formData",m.formData)}return C(async()=>{const s=await j.dispatch("fetchMenus");d.value=s.results}),(s,a)=>{const p=k("TomSelect");return c(),f("div",ae,[se,e("form",{class:"p-5",onSubmit:T(i,["prevent"])},[e("div",le,[e("div",ie,[e("div",ne,[e("div",re,[u(U,{modelValue:t.formData.tax_rate,"onUpdate:modelValue":a[0]||(a[0]=l=>t.formData.tax_rate=l),title:"Tax rate","id-value":"cafe-form-tax_rate",error:t.externalErrors.tax_rate&&t.externalErrors.tax_rate[0],"is-required":!0,typeValue:"number"},null,8,["modelValue","error"]),u(U,{modelValue:t.formData.order_limit,"onUpdate:modelValue":a[1]||(a[1]=l=>t.formData.order_limit=l),title:"Order limit","id-value":"cafe-form-order_limit",error:t.externalErrors.order_limit&&t.externalErrors.order_limit[0],"is-required":!0,typeValue:"number",class:"mt-3"},null,8,["modelValue","error"])]),e("div",de,[u(U,{modelValue:t.formData.order_time_limit,"onUpdate:modelValue":a[2]||(a[2]=l=>t.formData.order_time_limit=l),title:"Order Interval Time (interval between each order times)","id-value":"cafe-form-order_time_limit",error:t.externalErrors.order_time_limit&&t.externalErrors.order_time_limit[0],"is-required":!0,typeValue:"number",class:"mt-3 2xl:mt-0"},null,8,["modelValue","error"]),e("div",me,[ce,u(p,{id:"cafe-form-menu",modelValue:t.formData.menu,"onUpdate:modelValue":a[3]||(a[3]=l=>t.formData.menu=l),options:{placeholder:"Search.."},class:"w-full"},{default:B(()=>[(c(!0),f(D,null,S(d.value,({name:l,id:o})=>(c(),f("option",{key:o,value:o},x(l),9,ue))),128))]),_:1},8,["modelValue","options"])])])]),e("div",fe,[u(I,{"is-loading":t.isLoading},null,8,["is-loading"])])])])],40,oe)])}}},pe={class:"intro-y box lg:mt-5"},ye=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe Delivery")],-1),ve=["onSubmit"],xe={class:"flex xl:flex-row flex-col"},ge={class:"flex-1 mt-6 xl:mt-0"},he={class:"flex"},be={class:"form-check w-auto"},we=e("label",{class:"form-check-label",for:"delivery_available"},"Delivery available",-1),ke={class:"flex flex-col lg:flex-row gap-5 pt-5"},$e={class:"input-form lg:basis-1/2"},De=e("label",{for:"delivery_max_distance",class:"form-label w-full flex flex-col sm:flex-row"},"Delivery max distance",-1),Ce={class:"input-group"},Ee=e("div",{id:"input-group-km",class:"input-group-text"},"km",-1),Ve={class:"text-theme-6 mt-2"},Ue={class:"input-form lg:basis-1/2"},je=e("label",{for:"delivery_min_amount",class:"form-label w-full flex flex-col sm:flex-row"},"Delivery min amount",-1),Oe={class:"input-group"},Se=e("div",{id:"input-group-dollarsign",class:"input-group-text"}," $ ",-1),Ie={class:"text-theme-6 mt-2"},Te={class:"flex flex-col lg:flex-row gap-5 pt-5"},Le={class:"input-form lg:basis-1/2"},Fe=e("label",{for:"delivery_fee",class:"form-label w-full flex flex-col sm:flex-row"},"Fixed fee",-1),Me={class:"input-group"},Be=e("div",{id:"input-group-dollarsign",class:"input-group-text"}," $ ",-1),Ne={class:"text-theme-6 mt-2"},Re={class:"input-form lg:basis-1/2"},We=e("label",{for:"delivery_percent",class:"form-label w-full flex flex-col sm:flex-row"},"% of order fee",-1),Ge={class:"text-theme-6 mt-2"},qe={class:"flex flex-col lg:flex-row gap-5 py-5"},ze={class:"input-form lg:basis-1/2"},Ae=e("label",{for:"delivery_km_amount",class:"form-label w-full flex flex-col sm:flex-row"},"Fee per kilometer",-1),Pe={class:"text-theme-6 mt-2"},Xe={class:"input-form lg:basis-1/2"},Ye=e("label",{for:"delivery_min_time",class:"form-label w-full flex flex-col sm:flex-row"},"Delivery time (in minutes)",-1),He={class:"text-theme-6 mt-2"},Je={class:"flex justify-end gap-3"},Qe={__name:"CafeDelivery",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}},isLoading:!1},emits:["update:formData"],setup(t,{emit:_}){const m=t;async function d(){_("update:formData",m.formData)}return(i,s)=>(c(),f("div",pe,[ye,e("form",{class:"p-5",onSubmit:T(d,["prevent"])},[e("div",xe,[e("div",ge,[e("div",he,[e("div",be,[b(e("input",{id:"delivery_available",class:"form-check-switch",type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>t.formData.delivery_available=a)},null,512),[[G,t.formData.delivery_available]]),we])]),t.formData.delivery_available?(c(),f(D,{key:0},[e("div",ke,[e("div",$e,[De,e("div",Ce,[Ee,b(e("input",{id:"delivery_max_distance","onUpdate:modelValue":s[1]||(s[1]=a=>t.formData.delivery_max_distance=a),type:"number",class:"form-control","aria-describedby":"input-group-km"},null,512),[[w,t.formData.delivery_max_distance]]),e("span",Ve,x(t.externalErrors.delivery_max_distance&&t.externalErrors.delivery_max_distance[0]),1)])]),e("div",Ue,[je,e("div",Oe,[Se,b(e("input",{id:"delivery_min_amount","onUpdate:modelValue":s[2]||(s[2]=a=>t.formData.delivery_min_amount=a),type:"number",step:"0.001",class:"form-control","aria-describedby":"input-group-dollarsign"},null,512),[[w,t.formData.delivery_min_amount]]),e("span",Ie,x(t.externalErrors.delivery_min_amount&&t.externalErrors.delivery_min_amount[0]),1)])])]),e("div",Te,[e("div",Le,[Fe,e("div",Me,[Be,b(e("input",{id:"delivery_fee","onUpdate:modelValue":s[3]||(s[3]=a=>t.formData.delivery_fee=a),type:"number",step:"0.001",class:"form-control","aria-describedby":"input-group-dollarsign"},null,512),[[w,t.formData.delivery_fee]]),e("span",Ne,x(t.externalErrors.delivery_fee&&t.externalErrors.delivery_fee[0]),1)])]),e("div",Re,[We,b(e("input",{id:"delivery_percent","onUpdate:modelValue":s[4]||(s[4]=a=>t.formData.delivery_percent=a),type:"number",step:"0.001",class:"form-control",placeholder:"Type.."},null,512),[[w,t.formData.delivery_percent]]),e("span",Ge,x(t.externalErrors.delivery_percent&&t.externalErrors.delivery_percent[0]),1)])]),e("div",qe,[e("div",ze,[Ae,b(e("input",{id:"delivery_km_amount","onUpdate:modelValue":s[5]||(s[5]=a=>t.formData.delivery_km_amount=a),type:"number",class:"form-control",placeholder:"Type.."},null,512),[[w,t.formData.delivery_km_amount]]),e("span",Pe,x(t.externalErrors.delivery_km_amount&&t.externalErrors.delivery_km_amount[0]),1)]),e("div",Xe,[Ye,b(e("input",{id:"delivery_min_time","onUpdate:modelValue":s[6]||(s[6]=a=>t.formData.delivery_min_time=a),type:"number",class:"form-control",placeholder:"Type.."},null,512),[[w,t.formData.delivery_min_time]]),e("span",He,x(t.externalErrors.delivery_min_time&&t.externalErrors.delivery_min_time[0]),1)])])],64)):N("",!0),e("div",Je,[u(I,{"is-loading":t.isLoading},null,8,["is-loading"])])])])],40,ve)]))}},Ze={class:"flex flex-col md:flex-row flex-wrap w-full"},Ke={class:"md:basis-1/2 lg:basis-1/4 2xl:basis-1/6 border-2 border-dashed shadow-sm border-gray-200 dark:border-dark-5 rounded-md p-5"},et={class:"md:basis-1/2 lg:basis-1/4 2xl:basis-1/6 border-2 border-dashed shadow-sm border-gray-200 dark:border-dark-5 rounded-md p-5"},tt={class:"h-24 lg:h-40 relative image-fit cursor-pointer zoom-in mx-auto"},at=["src"],st={__name:"MultipleImageUpload",props:{objId:null},emits:["update:image-files"],setup(t,{emit:_}){const m=g(null),d=g([]),i=g([]),s=E(),a=V();C(async()=>{s.params.id&&(j.commit("setLoadingStatus",!0),q(s.params.id).then(o=>{i.value=o||[],j.commit("setLoadingStatus",!1)}))});function p(o){i.value.length+o.target.files.length<=5?(o.target.files.forEach((n,y)=>{i.value.push({image:URL.createObjectURL(n),id:`img-${y}-${new Date().getTime()}`}),d.value.push(n)}),_("update:image-files",d.value)):a.error()}function l(o,n){i.value=O.exports.remove(i.value,(y,r)=>y.id!==o),d.value=O.exports.remove(d.value,(y,r)=>n!==r),_("update:image-files",d.value),String(o).startsWith("img")||R(o)}return(o,n)=>{const y=k("PlusIcon"),r=k("xIcon"),v=k("Tippy");return c(),f("div",Ze,[e("div",Ke,[e("button",{type:"button",class:"btn w-full h-24 lg:h-40 border-2 shadow-sm border-gray-200 dark:border-dark-5 rounded-md",onClick:n[0]||(n[0]=h=>m.value.click())},[u(y)]),e("input",{type:"file",ref_key:"inputFile",ref:m,multiple:"",class:"hidden",onChange:p},null,544)]),(c(!0),f(D,null,S(i.value,(h,$)=>(c(),f("div",et,[e("div",tt,[e("img",{class:"rounded-md",alt:"Logo",src:h.image,"data-action":"zoom"},null,8,at),u(v,{tag:"div",content:"Remove this logo?",class:"w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-theme-6 right-0 top-0 -mr-2 -mt-2",onClick:Ft=>l(h.id,$)},{default:B(()=>[u(r,{class:"w-4 h-4"})]),_:2},1032,["onClick"])])]))),256))])}}},ot={class:"intro-y box lg:mt-5"},lt=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe gallery")],-1),it={class:"p-5"},nt={class:"flex xl:flex-row flex-col"},rt={class:"flex-1 mt-6 xl:mt-0"},dt={class:"flex justify-end gap-3"},mt={__name:"CafeGallery",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}}},emits:["update:formData"],setup(t,{emit:_}){const m=t,d=E(),i=V(),s=g(!1);async function a(){var p,l;s.value=!0;try{if(((l=(p=m.formData)==null?void 0:p.upload_photos)==null?void 0:l.length)>0){const o=new FormData;for(let n of m.formData.upload_photos)o.append("images",n);o.append("cafe",m.formData.id),await A(o),i.success()}else i.warning("There is nothing to update!")}catch{i.error()}finally{s.value=!1}}return(p,l)=>{const o=k("SubmitButton");return c(),f("div",ot,[lt,e("div",it,[e("div",nt,[e("div",rt,[u(st,{"onUpdate:imageFiles":l[0]||(l[0]=n=>t.formData.upload_photos=n),"obj-id":z(d).params.id,class:"my-5"},null,8,["obj-id"]),e("div",dt,[u(o,{type:"button","is-loading":s.value,onClick:a},null,8,["is-loading"])])])])])])}}},ct={class:"intro-y box lg:mt-5"},ut=e("div",{class:"flex items-center p-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe working days")],-1),ft=["onSubmit"],_t={class:"flex xl:flex-row flex-col"},pt={class:"flex-1 mt-6 xl:mt-0"},yt={class:"input-form"},vt={class:"form-check w-auto"},xt=["checked"],gt=e("label",{class:"font-medium text-base ml-2 cursor-pointer",for:"status"},"Open/Closed",-1),ht={class:"text-theme-6 mt-2"},bt=e("div",{class:"flex flex-col sm:flex-row items-center my-5 border-b border-gray-200 dark:border-dark-5"},[e("h2",{class:"font-medium text-base mr-auto"},"Cafe hours")],-1),wt={class:"text-theme-6 mt-2"},kt={class:"flex justify-end gap-3"},$t={__name:"CafeWorkingDays",props:{formData:{type:Object,default:()=>{}},externalErrors:{type:Object,default:()=>{}}},emits:["update:formData"],setup(t,{emit:_}){const m=t,d=E(),i=V(),s=g(!1),a=g([{day:"monday",opening_time:null,closing_time:null,is_open:!1},{day:"tuesday",opening_time:null,closing_time:null,is_open:!1},{day:"wednesday",opening_time:null,closing_time:null,is_open:!1},{day:"thursday",opening_time:null,closing_time:null,is_open:!1},{day:"friday",opening_time:null,closing_time:null,is_open:!1},{day:"saturday",opening_time:null,closing_time:null,is_open:!1},{day:"sunday",opening_time:null,closing_time:null,is_open:!1}]);C(async()=>{(await P(d.params.id)).forEach((o,n)=>{a.value.forEach((y,r)=>{y.day===o.day&&(a.value[r]=o)})})});async function p(){try{s.value=!0;const l=await X({data:{week_time:a.value},id:d.params.id});i.success()}catch(l){i.error(),m.externalErrors.value=l.response.data}finally{s.value=!1}}return(l,o)=>(c(),f("div",ct,[ut,e("form",{class:"p-5",onSubmit:T(p,["prevent"])},[e("div",_t,[e("div",pt,[e("div",yt,[e("div",vt,[e("input",{id:"status",class:"form-check-switch",type:"checkbox",checked:t.formData.status===1,onChange:o[0]||(o[0]=n=>t.formData.status=n.target.checked===!0?1:0)},null,40,xt),gt]),e("span",ht,x(t.externalErrors.status&&t.externalErrors.status[0]),1)]),t.formData.status===1?(c(),f(D,{key:0},[bt,(c(!0),f(D,null,S(a.value,(n,y)=>(c(),W(te,{key:n.day,day:n,"onUpdate:opening_time":r=>n.opening_time=r,"onUpdate:closing_time":r=>n.closing_time=r,"onUpdate:is_open":r=>n.is_open=r,class:"mb-5 lg:mb-10"},null,8,["day","onUpdate:opening_time","onUpdate:closing_time","onUpdate:is_open"]))),128)),e("span",wt,x(t.externalErrors.week_time&&t.externalErrors.week_time[0]),1)],64)):N("",!0),e("div",kt,[u(I,{"is-loading":s.value},null,8,["is-loading"])])])])],40,ft)]))}},Dt=e("div",{class:"intro-y flex items-center mt-8"},[e("h2",{class:"text-lg font-medium mr-auto"},"Cafe Edit Form")],-1),Ct={class:"grid grid-cols-12 gap-6"},Et={class:"col-span-12 lg:col-span-8 2xl:col-span-9"},Vt={id:"delete-confirmation-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Ut={class:"modal-dialog"},jt={class:"modal-content"},Ot={class:"modal-body p-0"},St={class:"p-5 text-center"},It=e("div",{class:"text-3xl mt-5"},"Are you sure?",-1),Tt=e("div",{class:"text-gray-600 mt-2"},[F(" Do you really want to delete these records? "),e("br"),F("This process cannot be undone. ")],-1),Lt=e("button",{type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),Wt={__name:"EditForm",setup(t){const _=E(),m=V(),d=g("CafeInformation"),i=L({location:{lat:35.1234,lon:-95.1234},country:236,name:"",call_center:"",phone_code:"",website:"",state:"",city:"",postal_code:"",address:"",second_address:"",description:"",week_time:[{day:"monday",opening_time:null,closing_time:null,is_open:!1},{day:"tuesday",opening_time:null,closing_time:null,is_open:!1},{day:"wednesday",opening_time:null,closing_time:null,is_open:!1},{day:"thursday",opening_time:null,closing_time:null,is_open:!1},{day:"friday",opening_time:null,closing_time:null,is_open:!1},{day:"saturday",opening_time:null,closing_time:null,is_open:!1},{day:"sunday",opening_time:null,closing_time:null,is_open:!1}],delivery_available:!1,delivery_max_distance:1,delivery_min_amount:50,delivery_fee:3,delivery_percent:10,delivery_km_amount:0,delivery_min_time:30,cafe_timezone:"America/New_York",status:0}),s=L({}),a=g(!1),p={CafeInformation:ee,CafeOperations:_e,CafeDelivery:Qe,CafeGallery:mt,CafeWorkingDays:$t};C(async()=>{const r=await Y(_.params.id);Object.assign(i,r)});function l(r){d.value=r}async function o(r){var v;a.value=!0,Object.assign(s,{}),delete r.logo;try{await J({data:r,id:_.params.id}),m.success()}catch(h){m.error(),Object.assign(s,(v=h.response)==null?void 0:v.data)}finally{a.value=!1}}function n(){M("#delete-confirmation-modal").modal("show")}async function y(){a.value=!0,M("#delete-confirmation-modal").modal("hide"),O.exports.isEmpty(i.photos)||i.photos.forEach(async({id:r})=>await R(r)),await Q(i.id),a.value=!0,Z.push("/dashboard/cafes")}return(r,v)=>{const h=k("XCircleIcon");return c(),f("div",null,[Dt,e("div",Ct,[u(K,{"onUpdate:selectedItem":v[0]||(v[0]=$=>l($)),"form-type":"edit","form-data":i,"external-errors":s,"onRemove:formData":n},null,8,["form-data","external-errors"]),e("div",Et,[(c(),W(H(p[d.value]),{"form-data":i,"is-loading":a.value,"external-errors":s,"onUpdate:formData":v[1]||(v[1]=$=>o($))},null,40,["form-data","is-loading","external-errors"]))])]),e("div",Vt,[e("div",Ut,[e("div",jt,[e("div",Ot,[e("div",St,[u(h,{class:"w-16 h-16 text-theme-6 mx-auto mt-3"}),It,Tt]),e("div",{class:"px-5 pb-8 text-center"},[Lt,e("button",{type:"button",class:"btn btn-danger w-24",onClick:y}," Delete ")])])])])])])}}};export{Wt as default};
