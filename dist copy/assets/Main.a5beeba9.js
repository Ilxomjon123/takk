import{_ as Z}from"./AdminMenuList.5a9ed4f6.js";import{_ as T,g as y,r as g,a,b as u,d as t,e,w as k,t as i,x,n as I,s as h,c as C,p as O,h as R,i as z,j as tt,R as et,F as $,l as F,A as D,G as ot,ad as st,f as N}from"./index.c1d8041c.js";import{M as at}from"./MainPaginator.c8762902.js";import{_ as G}from"./DeleteConfirmModal.8e1bb800.js";import{D as Y}from"./vuedraggable.umd.33421fb2.js";import"./Pagination.2cb0858d.js";const q=s=>(O("data-v-e1018a7f"),s=s(),R(),s),nt={id:"draggable-category-type-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},dt={class:"modal-dialog"},it={class:"modal-content"},rt=q(()=>t("div",{class:"modal-header"},[t("h2",{class:"font-medium text-base mr-auto"},"Reorder items")],-1)),lt={class:"modal-body p-10"},ct={class:"flex gap-3"},_t={class:"ml-auto"},ut={class:"modal-footer text-right"},mt=q(()=>t("button",{type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary mr-1"}," Cancel ",-1)),pt=["disabled"],ht={key:1},gt={__name:"DraggableTypeModal",props:{list:Array,paginator:Object},setup(s){const r=s,p=y(!1),n=y(!1);async function v(){n.value=!0;try{const l=await h.dispatch("updateModifierTypePositions",{obj_type:"product_category",obj_list:r.list.map((c,f)=>{var b,_;return{id:c.id,position:f+1+(((b=r.paginator)==null?void 0:b.page)-1)*((_=r.paginator)==null?void 0:_.limit)}})});p.value=!1,C("#draggable-category-type-modal").modal("hide")}catch(l){console.log(l)}finally{n.value=!1}}return(l,c)=>{const f=g("AlignJustifyIcon"),b=g("LoadingIcon");return a(),u("div",nt,[t("div",dt,[t("div",it,[rt,t("div",lt,[e(x(Y),{tag:"ul",list:s.list,handle:".handle","item-key":"id",onChange:c[0]||(c[0]=_=>p.value=!0)},{item:k(({element:_,index:w})=>[t("li",ct,[e(f,{class:"handle"}),t("span",null,i(_.name),1),t("span",_t,i(_.position),1)])]),_:1},8,["list"])]),t("div",ut,[mt,t("button",{type:"button",class:"btn btn-primary",onClick:v,disabled:!p.value||n.value},[n.value?(a(),I(b,{key:0,icon:"three-dots",color:"white",class:"my-2 mx-1"})):(a(),u("span",ht,"Save positions"))],8,pt)])])])])}}},ft=T(gt,[["__scopeId","data-v-e1018a7f"]]);const H=s=>(O("data-v-c79e61c1"),s=s(),R(),s),bt={id:"draggable-category-item-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},vt={class:"modal-dialog"},wt={class:"modal-content"},yt=H(()=>t("div",{class:"modal-header"},[t("h2",{class:"font-medium text-base mr-auto"},"Reorder items")],-1)),kt={class:"modal-body p-10"},xt={class:"flex gap-3"},It={class:"ml-auto"},$t={class:"modal-footer text-right"},Ct=H(()=>t("button",{type:"button","data-dismiss":"modal",class:"btn btn-outline-secondary mr-1"}," Cancel ",-1)),Mt=["disabled"],St={key:1},Lt={__name:"DraggableItemModal",props:{list:Array},setup(s){const r=s,p=y(!1),n=y(!1);async function v(){try{n.value=!0;const l=await h.dispatch("adminMenu/updateModifierTypePositions",{obj_type:"product_category",obj_list:r.list.map((c,f)=>({id:c.id,position:f+1}))});p.value=!1,C("#draggable-category-item-modal").modal("hide")}catch(l){console.log(l)}finally{n.value=!1}}return(l,c)=>{const f=g("AlignJustifyIcon"),b=g("LoadingIcon");return a(),u("div",bt,[t("div",vt,[t("div",wt,[yt,t("div",kt,[e(x(Y),{tag:"ul",list:s.list,handle:".handle","item-key":"id",onChange:c[0]||(c[0]=_=>p.value=!0)},{item:k(({element:_,index:w})=>[t("li",xt,[e(f,{class:"handle"}),t("span",null,i(_.name),1),t("span",It,i(_.position),1)])]),_:1},8,["list"])]),t("div",$t,[Ct,t("button",{type:"button",class:"btn btn-primary",onClick:v,disabled:!p.value||n.value},[n.value?(a(),I(b,{key:0,icon:"three-dots",color:"white",class:"my-2 mx-1"})):(a(),u("span",St,"Save positions"))],8,Mt)])])])])}}},At=T(Lt,[["__scopeId","data-v-c79e61c1"]]);const M=s=>(O("data-v-b7d1f4d9"),s=s(),R(),s),Dt={key:0},Tt={class:"intro-y flex flex-col sm:flex-row items-center mt-10"},Ot=M(()=>t("h2",{class:"text-lg font-medium"},"Categories List",-1)),Rt={class:"w-full sm:w-auto flex mt-4 sm:mt-0"},Nt=N("Add Category "),Et={class:"dropdown inline-block","data-placement":"right-start"},Pt={class:"dropdown-toggle","aria-expanded":"false"},jt={class:"dropdown-menu w-fit"},Vt={class:"dropdown-menu__content box dark:bg-dark-1 p-2"},Bt=["disabled"],Jt=M(()=>t("span",{class:"whitespace-nowrap"},"Reorder Categories",-1)),zt=["disabled"],Ft=M(()=>t("span",{class:"whitespace-nowrap"},"Reorder Category Items",-1)),Gt={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},Yt={class:"table table-report -mt-2"},qt=M(()=>t("thead",null,[t("tr",null,[t("th",{class:"whitespace-nowrap"},"LOGO"),t("th",{class:"whitespace-nowrap"},"NAME"),t("th",{class:"whitespace-nowrap"},"PARENT CATEGORY"),t("th",{class:"whitespace-nowrap"},"POSITION"),t("th",{class:"whitespace-nowrap"},"START"),t("th",{class:"whitespace-nowrap"},"END"),t("th",{class:"whitespace-nowrap text-right w-5"},"ACTIONS")])],-1)),Ht={class:"zoom-in"},Kt={class:"w-1/12"},Qt={class:"w-10 h-10 image-fit zoom-in"},Ut=["src"],Wt=["onClick"],Xt={class:"ml-3 font-medium whitespace-nowrap"},Zt={class:"table-report__action"},te={class:"dropdown inline-block","data-placement":"right-start"},ee={class:"dropdown-toggle -mr-3","aria-expanded":"false"},oe={class:"dropdown-menu w-40"},se={class:"dropdown-menu__content box dark:bg-dark-1 p-2"},ae=N("Edit "),ne={"data-dismiss":"dropdown",class:"flex items-center cursor-pointer p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},de={class:"w-10"},ie={class:"w-10 h-10 image-fit zoom-in ml-10"},re=["src"],le={href:"",class:"font-medium whitespace-nowrap"},ce={class:"text-gray-600 text-xs whitespace-nowrap mt-0.5"},_e={class:"table-report__action"},ue={class:"dropdown inline-block","data-placement":"right-start"},me={class:"dropdown-toggle -mr-3","aria-expanded":"false"},pe={class:"dropdown-menu w-40"},he={class:"dropdown-menu__content box dark:bg-dark-1 p-2"},ge=N("Edit "),fe={"data-dismiss":"dropdown",class:"flex items-center cursor-pointer p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},be={key:1,class:"text-base text-center mt-10 text-gray-600"},ve={__name:"AdminCategoryList",setup(s){const r=z([]),p=z({}),n=y([]),v=y(null),l=tt(()=>h.getters.getSelectedMenuId);et(()=>l.value,d=>{console.log("new selectedMenuId: ",d),d&&c()},{deep:!0,immediate:!0});function c(){var d;h.commit("setLoadingStatus",!0),(d=v.value)==null||d.paginate(1),h.commit("setLoadingStatus",!1)}function f(d){Object.assign(r,d)}async function b(d){h.commit("setLoadingStatus",!0),(await h.dispatch("deleteCategory",d)).status?(h.commit("setSuccessNotification",!0),c()):h.commit("setErrorNotification",!0),h.commit("setLoadingStatus",!1)}function _(d){w(d)?n.value=[]:n.value=[d]}function w(d){return n.value.includes(d)}function K(){C("#draggable-category-type-modal").modal("show")}function Q(){C("#draggable-category-item-modal").modal("show")}return(d,S)=>{var V,B;const E=g("PlusIcon"),L=g("router-link"),A=g("MoreVerticalIcon"),P=g("ShuffleIcon"),U=g("MinusIcon"),j=g("Edit2Icon");return a(),u($,null,[x(l)!=null?(a(),u("div",Dt,[t("div",Tt,[Ot,t("div",Rt,[e(L,{to:"/admin/categories/add",class:"btn btn-primary ml-3"},{default:k(()=>[e(E,{class:"w-4 h-4 mr-3"}),Nt]),_:1})]),t("div",Et,[t("button",Pt,[e(A)]),t("div",jt,[t("div",Vt,[t("button",{class:"flex items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md w-full",onClick:K,disabled:r.length<2,"data-toggle":"dropdown"},[e(P,{class:"w-4 h-4 mr-3"}),Jt],8,Bt),t("button",{class:"flex items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md w-full cursor-pointer disabled:cursor-not-allowed",onClick:Q,disabled:n.value.length===0,"data-toggle":"dropdown"},[e(P,{class:"w-4 h-4 mr-3"}),Ft],8,zt)])])])]),t("div",Gt,[t("table",Yt,[qt,t("tbody",null,[(a(!0),u($,null,F(r,(o,W)=>(a(),u($,{key:W},[t("tr",Ht,[t("td",Kt,[t("div",Qt,[t("img",{alt:"Takk",class:"rounded-full",src:o.image},null,8,Ut)])]),t("td",{class:"hover:text-theme-9",onClick:m=>_(o.id)},[w(o.id)?D("",!0):(a(),I(E,{key:0})),w(o.id)?(a(),I(U,{key:1})):D("",!0),t("span",Xt,i(o.name),1)],8,Wt),t("td",null,i(o.parent),1),t("td",null,i(o.position),1),t("td",null,i(o.start),1),t("td",null,i(o.end),1),t("td",Zt,[t("div",te,[t("button",ee,[e(A)]),t("div",oe,[t("div",se,[e(L,{to:`/admin/categories/${o.id}`,"data-dismiss":"dropdown",class:"flex items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},{default:k(()=>[e(j,{class:"w-4 h-4 mr-2"}),ae]),_:2},1032,["to"]),t("a",ne,[e(G,{onOnConfirmedDelete:m=>b(o.id),isIcon:!0,modalId:"category-delete-modal-"+o.id,iconClass:"w-4 h-4 mr-2"},null,8,["onOnConfirmedDelete","modalId"])])])])])])]),(a(!0),u($,null,F(o.children,(m,X)=>{var J;return ot((a(),u("tr",{class:"inner-tr",key:X},[t("td",de,[t("div",ie,[t("img",{alt:"Takk",class:"rounded-full",src:m.image},null,8,re)])]),t("td",null,[t("a",le,i(m.name),1),t("div",ce,i((J=m.category)==null?void 0:J.name),1)]),t("td",null,i(o.name),1),t("td",null,i(m.position),1),t("td",null,i(m.start),1),t("td",null,i(m.end),1),t("td",_e,[t("div",ue,[t("button",me,[e(A)]),t("div",pe,[t("div",he,[e(L,{to:`/admin/categories/${m.id}`,"data-dismiss":"dropdown",class:"flex items-center p-2 transition duration-300 ease-in-out bg-white dark:bg-dark-1 hover:bg-gray-200 dark:hover:bg-dark-2 rounded-md"},{default:k(()=>[e(j,{class:"w-4 h-4 mr-3"}),ge]),_:2},1032,["to"]),t("a",fe,[e(G,{onOnConfirmedDelete:ye=>b(m.id),isIcon:!0,modalId:`category-delete-modal-${o.id}-${m.id}`,iconClass:"w-4 h-4 mr-2"},null,8,["onOnConfirmedDelete","modalId"])])])])])])])),[[st,w(o.id)]])}),128))],64))),128))])])]),x(l)!="null"&&x(l)?(a(),I(at,{key:0,class:"mt-5",dispatcher:"adminCategory/fetchCategories",ref_key:"paginator",ref:v,onSetItems:S[0]||(S[0]=o=>f(o)),form:p},null,8,["form"])):D("",!0)])):(a(),u("div",be," For showing Categories Please select Menu ")),e(ft,{list:r,paginator:{...(V=d.$refs.paginator)==null?void 0:V.paginator}},null,8,["list","paginator"]),e(At,{list:(B=r.find(o=>n.value.length>0&&o.id==n.value[0]))==null?void 0:B.children},null,8,["list"])],64)}}},we=T(ve,[["__scopeId","data-v-b7d1f4d9"]]),Se={__name:"Main",setup(s){return(r,p)=>(a(),u("div",null,[e(Z,{"sub-item-title":"Categories","sub-item-value":"product_category_count"}),e(we)]))}};export{Se as default};
