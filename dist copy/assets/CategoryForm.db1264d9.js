import{q as B,i as u,g as C,aB as D,o as O,aC as E,r as f,a as _,b as h,d as e,e as c,t as n,G as d,U as w,H as x,y as b,w as k,F as U,l as M,I as A,J as L,f as q,s as z}from"./index.c1d8041c.js";import{j as V}from"./functions.ef796c81.js";import{S as G}from"./SimpleImageUpload.74eb2152.js";const H={class:"col-span-12 lg:col-span-4 2xl:col-span-3 flex lg:block flex-col-reverse"},J=["textContent"],K=["onSubmit"],P={class:"flex flex-wrap -mx-3 mb-3"},$={class:"w-full md:w-1/2 px-3 mb-3"},Q={class:"form-check"},R=e("label",{class:"form-check-label text-base",for:"category-available"},"Available",-1),W={class:"w-full md:w-1/2 px-3 mb-3"},X={class:"form-check"},Y=e("label",{class:"form-check-label text-base",for:"kitchen-order"},"Kitchen Order",-1),Z={class:"w-full px-3 mb-3"},ee=e("label",{for:"name",class:"form-label"},"Name",-1),te=["textContent"],se={for:"start-time",class:"w-full px-3 mb-2"},oe=q("Available Time "),ae={class:"w-full px-3 mb-3 md:w-1/2"},le=["textContent"],ne={class:"w-full px-3 mb-3 md:w-1/2"},ie=["textContent"],re={class:"w-full px-3 mb-3"},ce=e("label",{class:"form-label"},"Parent Category",-1),de=e("option",{value:"0"},"- - - - - - -",-1),me=["value"],pe=["textContent"],ue=["textContent"],fe={class:"flex justify-end gap-3"},be={__name:"CategoryForm",props:{form:{type:Object,default:{image:"/src/assets/images/product_category.jpg"}},isEdit:{type:Boolean,default:!1},dispatcher:{type:String,default:"postCategory"}},setup(S){const m=S,g=B(),s=u({}),j=u({}),i=u({}),p=C(!1),v=D("selected-productmenu-id",null),y=C([]);O(async()=>{var t;Object.assign(s,m.form);const l=await E(v.value);y.value=(t=l.results)==null?void 0:t.filter(r=>r.id!==(s==null?void 0:s.id))});async function I(){p.value=!0,(s==null?void 0:s.parent)==0&&(s.parent=null);let l;const t={...s,...j,menu:v.value};typeof t.image=="string"&&delete t.image,m.isEdit?l={id:t.id,form:V(t)}:l=V(t);const r=await z.dispatch(m.dispatcher,l);r.status?(Object.assign(i,{}),g.success()):(Object.assign(i,r.data),g.error()),p.value=!1}function a(l){var t;return(t=i[l])==null?void 0:t[0]}return(l,t)=>{const r=f("InfoIcon"),T=f("Tippy"),F=f("TomSelect");return _(),h(U,null,[e("div",H,[c(G,{class:"w-52",title:s.image?"Change photo":"Add photo","image-path":s.image_medium,onUpdateImageFile:t[0]||(t[0]=o=>s.image=o)},null,8,["title","image-path"]),e("span",{class:"text-theme-6 mt-2",textContent:n(a("image"))},null,8,J)]),e("form",{onSubmit:L(I,["prevent"]),class:"col-span-12 lg:col-span-8 2xl:col-span-9"},[e("div",P,[e("div",$,[e("div",Q,[d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.available=o),id:"category-available",class:"form-check-switch",type:"checkbox"},null,512),[[w,s.available]]),R])]),e("div",W,[e("div",X,[d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.is_kitchen=o),id:"kitchen-order",class:"form-check-switch",type:"checkbox"},null,512),[[w,s.is_kitchen]]),Y])]),e("div",Z,[ee,d(e("input",{id:"name",type:"text",class:b(["form-control",a("name")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Name","onUpdate:modelValue":t[3]||(t[3]=o=>s.name=o)},null,2),[[x,s.name]]),e("div",{class:"text-theme-6",textContent:n(a("name"))},null,8,te)]),e("label",se,[oe,c(T,{tag:"a",href:"javascript:;",content:"If left blank product is always available."},{default:k(()=>[c(r,{class:"block text-xs"})]),_:1})]),e("div",ae,[d(e("input",{id:"start-time",type:"time",class:b(["form-control",a("start")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Username","onUpdate:modelValue":t[4]||(t[4]=o=>s.start=o)},null,2),[[x,s.start]]),e("div",{class:"text-theme-6",textContent:n(a("start"))},null,8,le)]),e("div",ne,[d(e("input",{id:"end-time",type:"time",class:b(["form-control",a("end")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Username","onUpdate:modelValue":t[5]||(t[5]=o=>s.end=o)},null,2),[[x,s.end]]),e("div",{class:"text-theme-6",textContent:n(a("end"))},null,8,ie)]),e("div",re,[ce,c(F,{modelValue:s.parent,"onUpdate:modelValue":t[6]||(t[6]=o=>s.parent=o),options:{placeholder:"Select Category"},class:"w-full"},{default:k(()=>[de,(_(!0),h(U,null,M(y.value,(o,N)=>(_(),h("option",{key:N,value:o.id},n(o.name),9,me))),128))]),_:1},8,["modelValue"]),e("div",{class:"text-theme-6",textContent:n(a("parent"))},null,8,pe)]),e("div",{class:"text-theme-6",textContent:n(i==null?void 0:i.detail)},null,8,ue)]),e("div",fe,[c(A,{"is-loading":p.value},null,8,["is-loading"])])],40,K)],64)}}};export{be as _};
