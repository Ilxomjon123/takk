import{q as B,ac as S,aK as $,X as D,aL as U,I as M,_ as N,r,a,b as n,d as t,G as b,H as g,y as v,t as l,A as u,e as d,w as C,F as h,l as E,n as T,J as Y}from"./index.c1d8041c.js";import{_ as I}from"./DeleteConfirmModal.8e1bb800.js";const w=B(),P=S({data(){return{employee:{phone:"",employee_position:null,cafes:[]},user:{avatar:"",date_of_birthday:"2000-01-01",phone:"",username:""},images:{},isLoading:!1,errors:{},cafeList:{results:[]},deleteLoading:!1}},computed:{...$(["getEmployeeTypes","getCompanyId"])},props:{form:{type:Object,default:{user:{avatar:"/src/assets/images/default_employee.png"},cafes:[],employee_position:2,phone:""}},isEdit:{type:Boolean,default:!1},dispatcher:{type:String,default:"adminEmployee/postAdminEmployeeNew"},isAddExist:{type:Boolean,default:!1}},async created(){var e;this.employee=this.form,this.user=this.form.user,this.employee.cafes=(e=this.form.cafes)==null?void 0:e.filter(s=>!D.exports.isUndefined(s)).map(s=>s.id),this.cafeList=await this.fetchAdminCafeList()},methods:{...U({fetchAdminCafeList:"adminCafe/fetchAdminCafeList"}),async submit(){var e,s,m;try{this.isLoading=!0,this.errors={};let i;this.isEdit?i={id:(e=this.employee)==null?void 0:e.id,form:{cafes:this.employee.cafes,employee_position:this.employee.employee_position,user:{date_of_birthday:(s=this.employee.user)==null?void 0:s.date_of_birthday}}}:i=this.employee;const k=await this.$store.dispatch(this.dispatcher,i);w.success(),this.$router.push("/admin/employees")}catch(i){w.error(),this.errors=(m=i.response)==null?void 0:m.data}finally{this.isLoading=!1}},async deleteAdminEmployee(){var s;this.deleteLoading=!0,this.errors={};const e=await this.$store.dispatch("adminEmployee/deleteAdminEmployee",(s=this.employee)==null?void 0:s.id);e.status?(this.errors={},e.status&&this.$router.push("/admin/employees")):this.errors=e.data,this.deleteLoading=!1},getError(e){var s;return(s=this.errors[e])==null?void 0:s[0]}},components:{DeleteConfirmModal:I,SubmitButton:M}}),j={class:"col-span-12 lg:col-span-4 2xl:col-span-3 flex lg:block flex-col-reverse"},F={class:"intro-y"},O={class:"border-2 border-dashed shadow-sm border-gray-200 dark:border-dark-5 rounded-md p-5 items-center"},z={class:"h-60 w-60 image-fit cursor-pointer zoom-in mx-auto"},G=["src"],q={class:"flex flex-wrap -mx-3 mb-3"},H={class:"w-full px-3 mb-3"},J=t("label",{for:"phone",class:"form-label"},"Phone",-1),K=t("span",{class:"text-theme-6"},"*",-1),W=["disabled"],X=["textContent"],Q=["textContent"],R={key:0,class:"w-full px-3 mb-3"},Z=t("label",{for:"username",class:"form-label"},"Username",-1),ee=["disabled"],te=["textContent"],se={key:1,class:"w-full px-3 mb-3"},oe=t("label",{for:"birth-date",class:"form-label"},"Birthday",-1),ae={class:"relative mx-auto"},le={class:"absolute rounded-l w-10 h-full flex items-center justify-center bg-gray-100 border text-gray-600 dark:bg-dark-1 dark:border-dark-4"},ne=["textContent"],ie={class:"w-full px-3 mb-3"},re=t("label",{for:"employee.position",class:"form-label"},"Position",-1),de=t("span",{class:"text-theme-6"},"*",-1),me=["value"],pe=["textContent"],ue={class:"w-full px-3 mb-3"},he=t("label",{class:"form-label"},"Cafes",-1),ce=["value"],fe=["textContent"],ye={class:"flex justify-end gap-3"};function _e(e,s,m,i,k,be){var f,y,_;const L=r("CalendarIcon"),x=r("Litepicker"),c=r("TomSelect"),A=r("DeleteConfirmModal"),V=r("SubmitButton");return a(),n(h,null,[t("div",j,[t("div",F,[t("div",O,[t("div",z,[t("img",{class:"rounded-md",alt:"Takk",src:(y=(f=e.employee)==null?void 0:f.user)==null?void 0:y.avatar},null,8,G),t("input",{type:"file",hidden:"",id:"avatar-image",onChange:s[0]||(s[0]=o=>e.changeImage(o,"avatar"))},null,32)])])])]),t("form",{onSubmit:s[6]||(s[6]=Y((...o)=>e.submit&&e.submit(...o),["prevent"])),class:"col-span-12 lg:col-span-8 2xl:col-span-9"},[t("div",q,[t("div",H,[J,K,b(t("input",{disabled:e.isEdit,id:"phone",type:"text",class:v(["form-control",e.getError("phone")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Phone","onUpdate:modelValue":s[1]||(s[1]=o=>e.employee.phone=o)},null,10,W),[[g,e.employee.phone]]),t("div",{class:"text-theme-6",textContent:l(e.getError("phone"))},null,8,X),t("div",{class:"text-theme-6",textContent:l((_=e.errors)==null?void 0:_.detail)},null,8,Q)]),e.isAddExist?u("",!0):(a(),n("div",R,[Z,b(t("input",{disabled:e.isEdit,id:"username",type:"text",class:v(["form-control",e.getError("username")!=null?"border-theme-6":"border-gray-300"]),placeholder:"Username","onUpdate:modelValue":s[2]||(s[2]=o=>e.user.username=o)},null,10,ee),[[g,e.user.username]]),t("div",{class:"text-theme-6",textContent:l(e.getError("username"))},null,8,te)])),e.isAddExist?u("",!0):(a(),n("div",se,[oe,t("div",ae,[t("div",le,[d(L,{class:"w-4 h-4"})]),d(x,{modelValue:e.user.date_of_birthday,"onUpdate:modelValue":s[3]||(s[3]=o=>e.user.date_of_birthday=o),options:{autoApply:!1,showWeekNumbers:!0,format:"YYYY-MM-DD",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"form-control pl-12"},null,8,["modelValue"])]),t("div",{class:"text-theme-6",textContent:l(e.getError("date_of_birthday"))},null,8,ne)])),t("div",ie,[re,de,d(c,{class:"w-full",modelValue:e.employee.employee_position,"onUpdate:modelValue":s[4]||(s[4]=o=>e.employee.employee_position=o),options:{placeholder:"Select Position"}},{default:C(()=>[(a(!0),n(h,null,E(e.getEmployeeTypes,(o,p)=>(a(),n("option",{key:p,value:o.value},l(o.name),9,me))),128))]),_:1},8,["modelValue"]),t("div",{class:"text-theme-6",textContent:l(e.getError("employee_position"))},null,8,pe)]),t("div",ue,[he,d(c,{modelValue:e.employee.cafes,"onUpdate:modelValue":s[5]||(s[5]=o=>e.employee.cafes=o),options:{placeholder:"Select Cafe"},class:"w-full",multiple:""},{default:C(()=>[(a(!0),n(h,null,E(e.cafeList.results,(o,p)=>(a(),n("option",{key:p,value:o.id},l(o.name),9,ce))),128))]),_:1},8,["modelValue"]),t("div",{class:"text-theme-6",textContent:l(e.getError("cafes"))},null,8,fe)])]),t("div",ye,[e.isEdit?(a(),T(A,{key:0,onOnConfirmedDelete:e.deleteAdminEmployee,isLoading:e.deleteLoading},null,8,["onOnConfirmedDelete","isLoading"])):u("",!0),d(V,{"is-loading":e.isLoading},null,8,["is-loading"])])],32)],64)}const Ce=N(P,[["render",_e]]);export{Ce as A};
